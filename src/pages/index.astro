---

---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
		<script is:inline src="https://www.youtube.com/iframe_api"></script>
	</head>
	<body>
		<h1>Wadsworth</h1>

		<div class="form-group">
			<label class="url-input">
				YouTube URL:
				<input type="url" />
			</label>
			<input id="copy" type="button" value="Copy">
			<input id="open" type="button" value="Open">
		</div>

		<div id="player"></div>
	</body>
</html>

<style is:global lang="scss">
	body {
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		background: linear-gradient(90deg, #F00 30%, #FFF 0%);
	}

	h1 {
		 color: #fff;
         font-size: calc(30vw*0.15);
         margin-left: calc(10vw*0.2);
	}

	iframe#player {
		display:none;
	}



	.form-group {
		display: flex;
	}

	input[type="button"] {
		padding:   0.5em 2em;
		border: 1px solid #333;
		font-size: 1.5em;
		background: #F00;
		color: #FFF;

	}

	.url-input {
		margin-left: 10%;
		width: 60%;
		display: flex;
		flex-direction: column;
		color: #333;
		font-size: 1.5em;
		font-weight: bold;
		border: 1px solid #333;
		border-radius: 8px 0 0 8px;
		padding: 12px;
		background: #fff;
	}

	.url-input input {
		margin-top: 0.5em;
		padding: 0.5em;
		font-size: 1em;
		border: none;
	}

</style>

<script is:inline>
	const input = document.querySelector('.url-input input');
	input.addEventListener('input',  (event) => {

		const video_id = event.target.value.split('v=')[1];
		console.log(video_id);
		const player = new YT.Player('player', {
			height: '390',
			width: '640',
			videoId: video_id,
			playerVars: {
				'autoplay': 0,
				'controls': 1
			},
			events: {
				'onReady': onPlayerReady
			}
		});

		function onPlayerReady() {
			const time = player.getDuration();
			const wadsworth = Math.floor(time * .33333333);
			window.wurl = `https://www.youtube.com/watch?v=${video_id}&t=${wadsworth}s`;
			console.log(wurl);
		}

		console.log(event.target.value);

	});


	const copy = document.getElementById('copy');
	copy.addEventListener('click', function()  {
		navigator.clipboard.writeText(window.wurl).then(function() {
			console.log('Async: Copying to clipboard was successful!');
		}, function(err) {
			console.error('Async: Could not copy text: ', err);
		});
	});

	const open = document.getElementById('open');
	open.addEventListener('click', function() {
		window.open(window.wurl);
	});
</script>